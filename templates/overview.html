<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overview</title>
    <!-- 코인 시세 변동 차트 -->
    <!-- 이건 예시라 나중에 trading을 제대로 만들고 바꾸자 -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['time', 'price'],
          ['11H',  1000],
          ['12H',  1170],
          ['13H',  660],
          ['14H',  1030]
          // 이 부분 더 늘리자
        ]);

        var options = {
          title: 'Coin Price Chart',
          curveType: 'function',
          legend: 'none' // 범례 숨기기
        };

        var chart = new google.visualization.LineChart(document.getElementById('price_chart'));

        chart.draw(data, options);
      }
    </script>
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
    <link href="https://fonts.googleapis.com/css?family=Philosopher" rel="stylesheet">
    <link href="../static/css/overview.css" rel="stylesheet">
  </head>

<!--
  Overview에서는
  
  오른쪽에 코인 시세 , 왼쪽에 거래 내역

  price chart page
  trading page 들어가는 버튼
  이 형식 !
-->

<!-- history DB
이전 거래 money
현재 거래 money
순서

=> 순서가 필요? 차트를 위해서?
순서가 필요하다!!! 

=> 순서와 현재 거래 money를 db에서 불러오는데 
거래가 발생할 때마다 불러올 수 있도록 하자.
그리고 그걸 차트에 적용

=> (거래 개수가 2개 이상일 때) 
거래가 발생할 때마다 이전 거래와 현재 거래 money를 비교해서 
change에 적용
-->

<body>
  <header class="page-header">
    <h1 class="h1_logo"><a href="{{ url_for('index') }}"><img class="logo" src="../static/images//binanceLogo.jpeg" alt="마켓 홈"></a></h1>
    <nav>
      <ul class="main-nav">
          <li><a href="{{ url_for('overview') }}">Overview</a></li>
          <li><a href="{{ url_for('login') }}">로그인해줘</a>
          <li><a href="{{ url_for('signup') }}">Sign up</a></li>
      </ul>
    </nav>
  </header>
  <!-- 메인 내용을 담는 layout은 main태그 -->
  <main>
    <div class="history">
      <table class="history_table">
        <tr>
          <th class="price_th">Last Price</th> <!-- flask나 mongodb에서 시간 계산하는거 있으면 그걸 통해서 가장 최근 거래 가격 표시 -->
          <th class="change_th">Change</th> <!-- 여기서 trading 페이지에서 거래했던 가격을 통해 %로 + - 표시 -->
        </tr>
        <tr>
          <td class="price_td"></td>
          <td class="change_td"></td>
        </tr>
        <tr>
          <td class="price_td"></td>
          <td class="change_td"></td>
        </tr>
        <tr>
          <td class="price_td"></td>
          <td class="change_td"></td>
        </tr>
        <tr>
          <td class="price_td"></td>
          <td class="change_td"></td>
        </tr>
      </table>
    </div>
    <!-- 일단 차트 보여주는 price chart 부분 -->
    <div id="price_chart"></div> 
  </main>
  <!-- onClick으로 flask url을 다루려면 window.location.href을 사용하고 url을 '/trading' 로 한다-->
  <section class="go_trading">
    <button class="trading_button" onClick="window.location.href='/trading'">Go to Trade</button>
  </section>
  </body>